[
  {
    "type": "effect_on_condition",
    "id": "EOC_Gamb_Breinforce",
    "effect": [
      {
        "if": { "not": { "u_has_effect": "effect_breinforce" } },
        "then": {
          "if": { "math": [ "u_gamb_ki", ">", "1" ] },
          "then": [
            { "math": [ "u_gamb_ki", "-=", "1" ] },
            { "math": [ "u_gamb_phyxpg", "+=", "0.1" ] },
            { "math": [ "u_gamb_kidrain", "+=", "0.1" ] },
            { "u_add_effect": "effect_breinforce", "duration": "PERMANENT" }
          ],
          "else": { "u_message": "You don't have enough ki.", "type": "bad" }
        },
        "else": [
          { "u_lose_effect": "effect_breinforce" },
          { "math": [ "u_gamb_phyxpg", "-=", "0.1" ] },
          { "math": [ "u_gamb_kidrain", "-=", "0.1" ] },
          { "u_message": "You turn off you Body Reinforcement" }
        ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_Gamb_Ironscale",
    "effect": [
      {
        "if": { "not": { "u_has_effect": "effect_ironscale" } },
        "then": {
          "if": { "math": [ "u_gamb_ki", ">", "0.5" ] },
          "then": [
            { "math": [ "u_gamb_ki", "-=", "0.5" ] },
            { "math": [ "u_gamb_phyxpg", "+=", "0.09" ] },
            { "math": [ "u_gamb_kidrain", "+=", "0.07" ] },
            { "u_add_effect": "effect_ironscale", "duration": "PERMANENT" }
          ],
          "else": { "u_message": "You don't have enough ki.", "type": "bad" }
        },
        "else": [
          { "u_lose_effect": "effect_ironscale" },
          { "math": [ "u_gamb_phyxpg", "-=", "0.08" ] },
          { "math": [ "u_gamb_kidrain", "-=", "0.07" ] },
          { "u_message": "You turn off you Ironscale" }
        ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_Gamb_Overload",
    "effect": [
      {
        "if": { "math": [ "u_gamb_ki", ">", "5" ] },
        "then": [
          { "math": [ "u_gamb_ki", "-=", "5" ] },
          { "u_add_effect": "effect_phy_overload", "duration": { "math": [ "20 - min(20,(u_gamb_phytoken^0.3))" ] } },
          { "u_add_effect": "effect_phy_overloadgood", "duration": { "math": [ "5 + ((u_gamb_phytoken/10)^0.6)" ] } },
          { "math": [ "u_gamb_phyxp", "+=", "7" ] },
          { "math": [ "u_gamb_kicap", "+=", "0.01" ] },
          { "math": [ "u_gamb_kireg", "+=", "0.00001" ] }
        ],
        "else": { "u_message": "You don't have enough ki.", "type": "bad" }
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_Gamb_PureDrain",
    "recurrence": [ "1 s", "1 s" ],
    "condition": { "math": [ "u_gamb_kidrain > 0" ] },
    "effect": [
      { "math": [ "u_gamb_ki", "-=", "u_gamb_kidrain " ] },
      { "math": [ "u_gamb_phyxp", "+=", "u_gamb_phyxpg" ] },
      { "math": [ "u_gamb_kicap", "+=", "u_gamb_phyxpg*0.025" ] },
      { "math": [ "u_gamb_kireg", "+=", "u_gamb_phyxpg*0.00005" ] },
      {
        "if": { "math": [ "u_gamb_ki", "<", "u_gamb_kidrain" ] },
        "then": [ { "u_message": "You run out of ki to sustain your spells.", "type": "bad" }, { "run_eocs": [ "EOC_Gamb_KiPhyOff" ] } ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_Gamb_KiPhyOff",
    "effect": [
      { "u_lose_effect": "effect_breinforce" },
      { "u_lose_effect": "effect_ironscale" },
      { "math": [ "u_gamb_phyxpg", "=", "0" ] },
      { "math": [ "u_gamb_kidrain", "=", "0" ] }
    ]
  }
]
